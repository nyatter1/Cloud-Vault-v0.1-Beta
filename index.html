<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CloudVault | Simple File Hosting & Sharing</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script>
        // Custom Tailwind Config for Dark Mode
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            DEFAULT: '#2563eb',
                            hover: '#1d4ed8',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
            overflow-x: hidden;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .glass-nav {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .dark .glass-nav {
            background: rgba(15, 23, 42, 0.8);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .hero-gradient {
            background: radial-gradient(circle at top right, #eff6ff 0%, #ffffff 50%);
        }

        .dark .hero-gradient {
            background: radial-gradient(circle at top right, #1e293b 0%, #0f172a 50%);
        }

        /* Modal Overlay */
        .modal-overlay {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(4px);
            opacity: 0;
            pointer-events: none;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            pointer-events: auto;
        }

        .modal-content {
            transform: scale(0.9) translateY(20px);
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .modal-overlay.active .modal-content {
            transform: scale(1) translateY(0);
        }

        /* Theme Toggle Switch */
        .theme-toggle {
            position: relative;
            width: 48px;
            height: 24px;
            background: #e2e8f0;
            border-radius: 12px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .dark .theme-toggle {
            background: #334155;
        }

        .theme-toggle::after {
            content: '';
            position: absolute;
            left: 2px;
            top: 2px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .dark .theme-toggle::after {
            transform: translateX(24px);
            background: #1e293b;
        }
    </style>
</head>
<body class="bg-white dark:bg-slate-950 text-slate-900 dark:text-slate-100">

    <!-- Navigation -->
    <nav class="glass-nav fixed w-full z-50 top-0">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <div class="flex items-center gap-2 cursor-pointer" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">
                    <div class="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center text-white">
                        <i class="fas fa-cloud-upload-alt text-xl"></i>
                    </div>
                    <span class="text-xl font-bold tracking-tight">CloudVault</span>
                </div>
                
                <div class="hidden md:flex items-center space-x-8">
                    <button onclick="openModal('features')" class="text-slate-600 dark:text-slate-300 hover:text-blue-600 dark:hover:text-blue-400 font-medium transition">Features</button>
                    <button onclick="openModal('pricing')" class="text-slate-600 dark:text-slate-300 hover:text-blue-600 dark:hover:text-blue-400 font-medium transition">Pricing</button>
                    <a href="#" class="text-slate-600 dark:text-slate-300 hover:text-blue-600 dark:hover:text-blue-400 font-medium transition">Support</a>
                </div>

                <div class="flex items-center gap-4">
                    <!-- Theme Toggle -->
                    <div class="theme-toggle mr-2" id="themeToggle" onclick="toggleDarkMode()">
                        <div class="absolute inset-0 flex items-center justify-between px-1.5 pointer-events-none">
                            <i class="fas fa-sun text-[10px] text-orange-400"></i>
                            <i class="fas fa-moon text-[10px] text-blue-400"></i>
                        </div>
                    </div>

                    <button onclick="openModal('login')" class="hidden sm:block text-slate-600 dark:text-slate-300 hover:text-blue-600 font-medium">Log In</button>
                    <button onclick="openModal('signup')" class="bg-blue-600 text-white px-5 py-2.5 rounded-full font-semibold hover:bg-blue-700 transition shadow-lg shadow-blue-200 dark:shadow-blue-900/20">
                        Sign Up
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <main class="pt-32 pb-20 hero-gradient min-h-screen flex items-center">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h1 class="text-5xl md:text-7xl font-extrabold tracking-tight text-slate-900 dark:text-white mb-6">
                Share files <span class="text-blue-600">effortlessly.</span>
            </h1>
            <p class="text-xl text-slate-600 dark:text-slate-400 max-w-2xl mx-auto mb-12">
                The fastest way to store, share, and collaborate on your files. No limits, no hassle, just pure speed.
            </p>

            <!-- Teaser Placeholder -->
            <div class="max-w-lg mx-auto p-1 text-center">
                <div class="bg-blue-50 dark:bg-blue-900/10 border border-blue-100 dark:border-blue-900/30 p-8 rounded-3xl">
                    <div class="inline-flex items-center px-3 py-1 rounded-full bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 text-xs font-bold uppercase tracking-widest mb-4">
                        Coming Soon
                    </div>
                    <h2 class="text-2xl font-bold mb-4 dark:text-white">Full Upload Functionality</h2>
                    <p class="text-slate-600 dark:text-slate-400 mb-6">We're currently scaling our servers to handle millions of uploads. Join the beta to be the first to know when we launch.</p>
                    <div class="flex flex-col sm:flex-row gap-3">
                        <input type="email" id="waitlistEmail" placeholder="Enter your email" class="flex-1 px-5 py-3 rounded-2xl bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 focus:ring-2 focus:ring-blue-500 outline-none transition">
                        <button onclick="showToast('You\'ve been added to the waitlist!')" class="bg-slate-900 dark:bg-blue-600 text-white px-6 py-3 rounded-2xl font-bold hover:scale-105 transition active:scale-95">
                            Notify Me
                        </button>
                    </div>
                </div>
                <div class="mt-8 flex justify-center items-center gap-8 text-slate-400 dark:text-slate-600 text-2xl">
                    <i class="fab fa-dropbox"></i>
                    <i class="fab fa-google-drive"></i>
                    <i class="fab fa-aws"></i>
                    <i class="fas fa-server"></i>
                </div>
            </div>
        </div>
    </main>

    <!-- Modals Container -->
    <div id="modalOverlay" class="modal-overlay fixed inset-0 z-[100] flex items-center justify-center p-4">
        
        <!-- Login Modal -->
        <div id="loginModal" class="modal-content hidden bg-white dark:bg-slate-900 w-full max-w-md rounded-3xl shadow-2xl p-8 relative border border-slate-100 dark:border-slate-800">
            <button onclick="closeModal()" class="absolute top-6 right-6 text-slate-400 hover:text-slate-600">
                <i class="fas fa-times text-xl"></i>
            </button>
            <h2 class="text-2xl font-bold mb-2 dark:text-white">Welcome Back</h2>
            <p class="text-slate-500 dark:text-slate-400 mb-8 text-sm">Log in to your CloudVault account</p>
            
            <form id="loginForm" class="space-y-4" onsubmit="return false;">
                <div>
                    <label class="block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1">Email Address</label>
                    <input type="email" id="loginEmail" required class="w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-800 bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 transition" placeholder="you@example.com">
                </div>
                <div>
                    <label class="block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1">Password</label>
                    <input type="password" id="loginPassword" required class="w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-800 bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 transition" placeholder="••••••••">
                </div>
                <button type="submit" id="loginBtn" class="w-full bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700 transition shadow-lg shadow-blue-200 dark:shadow-none">
                    Sign In
                </button>
            </form>
            <p class="mt-6 text-center text-sm text-slate-500 dark:text-slate-400">
                Don't have an account? <button onclick="openModal('signup')" class="text-blue-600 font-bold">Sign up</button>
            </p>
        </div>

        <!-- Signup Modal -->
        <div id="signupModal" class="modal-content hidden bg-white dark:bg-slate-900 w-full max-w-md rounded-3xl shadow-2xl p-8 relative border border-slate-100 dark:border-slate-800">
            <button onclick="closeModal()" class="absolute top-6 right-6 text-slate-400 hover:text-slate-600">
                <i class="fas fa-times text-xl"></i>
            </button>
            <h2 class="text-2xl font-bold mb-2 dark:text-white">Create Account</h2>
            <p class="text-slate-500 dark:text-slate-400 mb-8 text-sm">Join CloudVault for 50GB free storage</p>
            
            <form id="signupForm" class="space-y-4" onsubmit="return false;">
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1">First Name</label>
                        <input type="text" id="signupFirst" required class="w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-800 bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 transition" placeholder="John">
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1">Last Name</label>
                        <input type="text" id="signupLast" required class="w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-800 bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 transition" placeholder="Doe">
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1">Email Address</label>
                    <input type="email" id="signupEmail" required class="w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-800 bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 transition" placeholder="you@example.com">
                </div>
                <div>
                    <label class="block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1">Password</label>
                    <input type="password" id="signupPassword" required class="w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-800 bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 transition" placeholder="Min 8 characters">
                </div>
                <button type="submit" id="signupBtn" class="w-full bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700 transition shadow-lg shadow-blue-200 dark:shadow-none">
                    Create Free Account
                </button>
            </form>
            <p class="mt-6 text-center text-sm text-slate-500 dark:text-slate-400">
                Already have an account? <button onclick="openModal('login')" class="text-blue-600 font-bold">Log in</button>
            </p>
        </div>

        <!-- Pricing Modal -->
        <div id="pricingModal" class="modal-content hidden bg-blue-600 text-white w-full max-w-sm rounded-3xl shadow-2xl p-8 text-center relative">
            <button onclick="closeModal()" class="absolute top-6 right-6 text-white/50 hover:text-white">
                <i class="fas fa-times text-xl"></i>
            </button>
            <div class="w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-6">
                <i class="fas fa-gift text-3xl"></i>
            </div>
            <h2 class="text-3xl font-black mb-2 italic">100% FREE!</h2>
            <p class="text-blue-100 mb-8 font-medium">CloudVault is currently in Public Beta. Enjoy all Premium features at zero cost.</p>
            <button onclick="openModal('signup')" class="w-full bg-white text-blue-600 py-4 rounded-2xl font-black text-lg hover:bg-blue-50 transition">
                TRY NOW BETA
            </button>
            <p class="mt-6 text-xs text-blue-200 uppercase tracking-widest font-bold">Limited time offer</p>
        </div>

        <!-- Features Modal -->
        <div id="featuresModal" class="modal-content hidden bg-white dark:bg-slate-900 w-full max-w-2xl rounded-3xl shadow-2xl p-8 relative border border-slate-100 dark:border-slate-800">
            <button onclick="closeModal()" class="absolute top-6 right-6 text-slate-400 hover:text-slate-600">
                <i class="fas fa-times text-xl"></i>
            </button>
            <h2 class="text-2xl font-bold mb-8 dark:text-white">Platform Features</h2>
            <div class="grid md:grid-cols-2 gap-6">
                <div class="flex gap-4 p-4 rounded-2xl bg-slate-50 dark:bg-slate-800">
                    <div class="text-blue-600 mt-1"><i class="fas fa-bolt text-xl"></i></div>
                    <div>
                        <h4 class="font-bold dark:text-white">Unlimited Speed</h4>
                        <p class="text-sm text-slate-500 dark:text-slate-400">No throttling on downloads or uploads, even for free users.</p>
                    </div>
                </div>
                <div class="flex gap-4 p-4 rounded-2xl bg-slate-50 dark:bg-slate-800">
                    <div class="text-blue-600 mt-1"><i class="fas fa-shield-virus text-xl"></i></div>
                    <div>
                        <h4 class="font-bold dark:text-white">Virus Scanning</h4>
                        <p class="text-sm text-slate-500 dark:text-slate-400">Every file is scanned automatically using CloudVault Sense.</p>
                    </div>
                </div>
                <div class="flex gap-4 p-4 rounded-2xl bg-slate-50 dark:bg-slate-800">
                    <div class="text-blue-600 mt-1"><i class="fas fa-file-export text-xl"></i></div>
                    <div>
                        <h4 class="font-bold dark:text-white">Bulk Download</h4>
                        <p class="text-sm text-slate-500 dark:text-slate-400">Select multiple files and download them as a single ZIP.</p>
                    </div>
                </div>
                <div class="flex gap-4 p-4 rounded-2xl bg-slate-50 dark:bg-slate-800">
                    <div class="text-blue-600 mt-1"><i class="fas fa-mobile-alt text-xl"></i></div>
                    <div>
                        <h4 class="font-bold dark:text-white">Mobile First</h4>
                        <p class="text-sm text-slate-500 dark:text-slate-400">Optimized experience for sharing on the go.</p>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Message Toast -->
    <div id="toast" class="fixed bottom-8 right-8 bg-slate-900 text-white px-6 py-3 rounded-xl shadow-2xl transform translate-y-24 transition-transform duration-300 z-[200]">
        Notification message
    </div>

    <!-- Firebase Configuration and Logic -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { 
            getAuth, 
            createUserWithEmailAndPassword, 
            signInWithEmailAndPassword, 
            onAuthStateChanged 
        } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { 
            getFirestore, 
            doc, 
            setDoc 
        } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Environment variables
        const firebaseConfig = JSON.parse(__firebase_config);
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'chatlaxy-pro';

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        // Listen for authentication state changes
        onAuthStateChanged(auth, (user) => {
            if (user) {
                console.log("User detected, redirecting to main.html...");
                window.location.href = 'main.html';
            }
        });

        // Signup Logic
        const handleSignup = async (e) => {
            e.preventDefault();
            e.stopPropagation();
            
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;
            const firstName = document.getElementById('signupFirst').value;
            const lastName = document.getElementById('signupLast').value;
            const btn = document.getElementById('signupBtn');

            btn.disabled = true;
            btn.innerHTML = `<i class="fas fa-circle-notch fa-spin"></i> Creating...`;

            try {
                const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                const user = userCredential.user;

                // Rule 1: Use strict paths for Firestore
                await setDoc(doc(db, 'artifacts', appId, 'users', user.uid, 'settings', 'profile'), {
                    firstName,
                    lastName,
                    email,
                    createdAt: new Date().toISOString()
                });

                showToast("Account created! Redirecting...");
                // Note: Redirect is handled by onAuthStateChanged listener
            } catch (error) {
                console.error("Signup Error:", error);
                showToast(`Error: ${error.message}`);
                btn.disabled = false;
                btn.innerText = "Create Free Account";
            }
            return false;
        };

        // Login Logic
        const handleLogin = async (e) => {
            e.preventDefault();
            e.stopPropagation();

            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const btn = document.getElementById('loginBtn');

            btn.disabled = true;
            btn.innerHTML = `<i class="fas fa-circle-notch fa-spin"></i> Signing in...`;

            try {
                await signInWithEmailAndPassword(auth, email, password);
                showToast("Welcome back!");
                // Note: Redirect is handled by onAuthStateChanged listener
            } catch (error) {
                console.error("Login Error:", error);
                showToast(`Login failed: ${error.message}`);
                btn.disabled = false;
                btn.innerText = "Sign In";
            }
            return false;
        };

        // Bind events
        document.getElementById('signupForm').addEventListener('submit', handleSignup);
        document.getElementById('loginForm').addEventListener('submit', handleLogin);

        // Toast helper exposed to window
        window.showToast = (message) => {
            const toast = document.getElementById('toast');
            toast.innerText = message;
            toast.classList.remove('translate-y-24');
            setTimeout(() => toast.classList.add('translate-y-24'), 3500);
        };
    </script>

    <script>
        // UI & Modal Logic
        const modalOverlay = document.getElementById('modalOverlay');

        // Dark Mode Initialization
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark');
        }

        function toggleDarkMode() {
            const isDark = document.documentElement.classList.toggle('dark');
            localStorage.theme = isDark ? 'dark' : 'light';
        }

        function openModal(type) {
            document.querySelectorAll('.modal-content').forEach(m => m.classList.add('hidden'));
            modalOverlay.classList.add('active');
            document.getElementById(`${type}Modal`).classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            modalOverlay.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        modalOverlay.addEventListener('click', (e) => {
            if (e.target === modalOverlay) closeModal();
        });
    </script>
</body>
</html>
